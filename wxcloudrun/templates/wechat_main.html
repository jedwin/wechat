<!DOCTYPE html>
<html lang="zh-cmn-Hans" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover">
    <meta name="wechat-enable-text-zoom-em" content="true">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="/static/style/weui.css"/>
    <link rel="stylesheet" href="/static/style/example.css"/>
</head>
<body ontouchstart>
<script type="text/javascript">
      if(window.__wxWebEnv){
        document.body.style.webkitTextSizeAdjust = JSON.parse(window.__wxWebEnv.getEnv()).fontScale + '%';
      }

    </script>

<div class="container" id="container"></div>
<script type="text/html" id="tpl_home">
    <div class="page article">
        <div class="page__hd">
            <h1 class="page__title">
                <img src="{{ player_info.headimgurl }}" alt="{{ player_info.nickname }}" height="132px"/>
                {{ title }}
            </h1>

        </div>


        <article class="weui-article">
            <h1>{{ cur_game_name }}</h1>
            <p>
                {{ reply_obj }}
            </p>
        </article>

        <div class="weui-form">
            <form class="weui-cells__group weui-cells__group_form" action="/profile/" >
                <div class="weui-form__text-area">
                    <h2 class="weui-form__title">开始挑战</h2>
                </div>
                <br>
                <div class="weui-cells">
                    {% if reply_options.length > 0 %}
                    {% for option in reply_options %}
                    <a aria-labelledby="js_cell_tl2_tips js_cell_tl2_link" class="{{ option.style }}"
                       href="/profile/?app_en_name={{app_en_name}}&cur_game_name={{cur_game_name}}&openid={{open_id}}&cmd={{option.trigger}}">
                        <span class="weui-cell__bd" id="{{option.trigger}}">
                            <span>{{option.trigger}}</span>
                        </span>
                        <span class="weui-cell__ft">
                            {{ option.comment }}
                        </span>
                    </a>
                    {% endfor %}
                    {% else %}
                    <label for="js_input" class="weui-cell weui-cell_active">
                        <div class="weui-cell__hd"><span class="weui-label">你的答案是</span></div>
                        <div class="weui-cell__bd">
                            <input id="js_input" class="weui-input" placeholder="请把你的答案写在这里哦"/>
                        </div>
                    </label>
                    <div class="weui-form__opr-area">
                        <a role="button" disabled aria-disabled="true" href="javascript:" id="showTooltips"
                           class="weui-btn weui-btn_primary weui-btn_disabled">确定</a>
                    </div>
                    {% endif %}
                </div>
                <br>
                <div class="page__bd page__bd_spacing">
                    <a href="javascript:" role="button" class="weui-btn weui-btn_default" id="showIOSDialog1">提示</a>
                    <a href="javascript:" role="button" class="weui-btn weui-btn_default" id="showProgress">查看进度</a>
                    <a href="javascript:" role="button" class="weui-btn weui-btn_default" id="showClearCode">查看通关码</a>
                </div>
                <div id="dialogs">
                    <div class="js_dialog" role="dialog"  aria-hidden="true" aria-modal="true" aria-labelledby="js_title1" id="iosDialog1" style="display: none;">
                        <div class="weui-mask"></div>
                        <div class="weui-dialog">
                            <div class="weui-dialog__hd"><strong class="weui-dialog__title" id="js_title1">提示</strong></div>
                            <div class="weui-dialog__bd" id="notice">{{hint_string}}</div>
                            <div class="weui-dialog__ft">
                                <a role="button" href="javascript:" class="weui-dialog__btn weui-dialog__btn_default" id="confirm">确定</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div role="alert" id="textProgress" style="display: none;">
                    <div class="weui-mask_transparent"></div>
                    <div class="weui-toast weui-toast_text-more">
                        <i class="weui-icon-warn weui-icon_toast"></i>
                        <p class="weui-toast__content">{{progress}}</p>
                    </div>
                </div>
                <div role="alert" id="textClearCode" style="display: none;">
                    <div class="weui-mask_transparent"></div>
                    <div class="weui-toast weui-toast_text-more">
                        <i class="weui-icon-warn weui-icon_toast"></i>
                        <p class="weui-toast__content">{{ClearCode}}</p>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script>
    $(function(){
        var $iosDialog1 = $('#iosDialog1');
        var $cancle = $('#cancle');
        var $confirm = $('#confirm');
        $('#dialogs').on('click', '.weui-dialog__btn_default', function(){
            $(this).parents('.js_dialog').fadeOut(200);
            $(this).parents('.js_dialog').attr('aria-hidden','true');
            $(this).parents('.js_dialog').removeAttr('tabindex');
        });

        $('#dialogs').on('click', '.weui-dialog__btn_primary', function(){
            my_trigger = $('input[name="quest"]:checked').val();
		    $notice = $('#notice');
		    if (my_trigger){
		        globalThis.location = "/profile/?app_en_name={{ app_en_name }}&cur_game_name={{cur_game_name}}&openid={{openid}}&cmd="+my_trigger;
		    }else{
		        $(this).parents('.js_dialog').fadeOut(200);
                $(this).parents('.js_dialog').attr('aria-hidden','true');
                $(this).parents('.js_dialog').removeAttr('tabindex');
		    }
        });

        $('#showIOSDialog1').on('click', function(){

            $iosDialog1.fadeIn(200);
            $iosDialog1.attr('aria-hidden','false');
            $iosDialog1.attr('tabindex','0');
            $iosDialog1.trigger('focus');

        });


        var $textProgress = $('#textProgress');
        $('#showProgress').on('click', function(){
            if ($textProgress.css('display') != 'none') return;
            $textProgress.fadeIn(100);
            setTimeout(function () {
                $textProgress.fadeOut(100);
            }, 2000);
        });

        var $textClearCode = $('#textClearCode');
        $('#showClearCode').on('click', function(){
            if ($textClearCode.css('display') != 'none') return;
            $textClearCode.fadeIn(100);
            setTimeout(function () {
                $textClearCode.fadeOut(100);
            }, 2000);
        });

        var $input = $('#js_input');
        $input.on('input', function(){
        if ($input.val()){
          $('#showTooltips').removeClass('weui-btn_disabled');
          $('#showTooltips').attr('aria-disabled','false');
          $('#showTooltips').removeAttr('disabled');
        }else{
          $('#showTooltips').addClass('weui-btn_disabled');
          $('#showTooltips').addClass('weui-btn_disabled');
          $('#showTooltips').attr('aria-disabled','true');
          $('#showTooltips').addAttr('disabled');
        }
        });
        $('#showTooltips').on('click', function(){
        if ($(this).hasClass('weui-btn_disabled')) return;
        this.href='/profile/?app_en_name={{app_en_name}}&cur_game_name={{cur_game_name}}&openid={{openid}}&cmd='+$input.val();
        });
    });

</script>
</script>

<script src="/static/js/zepto.min.js"></script>
<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script src="https://res.wx.qq.com/t/wx_fed/cdn_libs/res/weui/1.2.8/weui.min.js"></script>
<script src="/static/js/example.js"></script>
<script src="/static/js/wah.js"></script>


</body>
</html>